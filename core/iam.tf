
# create an iam user for circleci
resource "aws_iam_user" "circleci" {
	name = "circleci"
}

# create the access key for the iam user
resource "aws_iam_access_key" "circleci-access-key" {
	user = "${aws_iam_user.circleci.name}"
	pgp_key = "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"
}

# attach a managed policy to the created role, for full access to ecr
resource "aws_iam_user_policy_attachment" "circleci-ecr-policy-attachment" {
  user       = "${aws_iam_user.circleci.name}"
  policy_arn = "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryFullAccess"
}
